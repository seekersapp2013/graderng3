{"version":3,"file":"index.esm.js","sources":["../../src/color-modes/index.tsx"],"sourcesContent":["import React, { useEffect, useCallback } from 'react';\nimport { useMediaQuery } from '../hooks/use-media-query';\nimport { ColorModes } from './styles';\nexport * from './utils';\nexport * from './types';\nexport * from './styles';\n\nexport const ColorModeContext = React.createContext<{ colorMode?: string; toggleColorMode?: any }>({\n  colorMode: undefined,\n});\n\nexport const ColorModeProvider = ({\n  colorMode,\n  children,\n  onChange,\n}: {\n  colorMode?: string;\n  children: any;\n  onChange?: (mode: string) => void;\n}) => {\n  const [mode, setMode] = React.useState(colorMode);\n  const [darkmode] = useMediaQuery('(prefers-color-scheme: dark)');\n  const [lightmode] = useMediaQuery('(prefers-color-scheme: light)');\n\n  useEffect(() => {\n    if (!mode) {\n      setMode(darkmode ? 'dark' : 'light');\n    }\n  }, [mode, darkmode, lightmode]);\n\n  const setColorMode = useCallback(\n    (mode: 'light' | 'dark') => {\n      setMode(mode);\n      onChange && onChange(mode);\n    },\n    [mode]\n  );\n\n  const toggleColorMode = useCallback(() => {\n    if (mode === 'light') {\n      setColorMode('dark');\n      return;\n    }\n    if (mode === 'dark') {\n      setColorMode('light');\n      return;\n    }\n    if (!colorMode && darkmode) {\n      setColorMode('light');\n      return;\n    }\n    if (!mode && lightmode) {\n      setColorMode('dark');\n      return;\n    }\n  }, [mode, lightmode, darkmode]);\n\n  return (\n    <ColorModeContext.Provider value={{ colorMode: mode, toggleColorMode }}>\n      <ColorModes colorMode={mode} />\n      {children}\n    </ColorModeContext.Provider>\n  );\n};\n"],"names":["ColorModeContext","React","createContext","colorMode","undefined","ColorModeProvider","children","onChange","useState","mode","setMode","useMediaQuery","darkmode","lightmode","useEffect","setColorMode","useCallback","toggleColorMode","Provider","value","ColorModes"],"mappings":";;;;;;;IAOaA,gBAAgB,gBAAGC,cAAK,CAACC,aAAN,CAAmE;AACjGC,EAAAA,SAAS,EAAEC;AADsF,CAAnE;IAInBC,iBAAiB,GAAG,SAApBA,iBAAoB;MAC/BF,iBAAAA;MACAG,gBAAAA;MACAC,gBAAAA;;wBAMwBN,cAAK,CAACO,QAAN,CAAeL,SAAf;MAAjBM;MAAMC;;uBACMC,aAAa,CAAC,8BAAD;MAAzBC;;wBACaD,aAAa,CAAC,+BAAD;MAA1BE;;AAEPC,EAAAA,SAAS,CAAC;AACR,QAAI,CAACL,IAAL,EAAW;AACTC,MAAAA,OAAO,CAACE,QAAQ,GAAG,MAAH,GAAY,OAArB,CAAP;AACD;AACF,GAJQ,EAIN,CAACH,IAAD,EAAOG,QAAP,EAAiBC,SAAjB,CAJM,CAAT;AAMA,MAAME,YAAY,GAAGC,WAAW,CAC9B,UAACP,IAAD;AACEC,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAF,IAAAA,QAAQ,IAAIA,QAAQ,CAACE,IAAD,CAApB;AACD,GAJ6B,EAK9B,CAACA,IAAD,CAL8B,CAAhC;AAQA,MAAMQ,eAAe,GAAGD,WAAW,CAAC;AAClC,QAAIP,IAAI,KAAK,OAAb,EAAsB;AACpBM,MAAAA,YAAY,CAAC,MAAD,CAAZ;AACA;AACD;;AACD,QAAIN,IAAI,KAAK,MAAb,EAAqB;AACnBM,MAAAA,YAAY,CAAC,OAAD,CAAZ;AACA;AACD;;AACD,QAAI,CAACZ,SAAD,IAAcS,QAAlB,EAA4B;AAC1BG,MAAAA,YAAY,CAAC,OAAD,CAAZ;AACA;AACD;;AACD,QAAI,CAACN,IAAD,IAASI,SAAb,EAAwB;AACtBE,MAAAA,YAAY,CAAC,MAAD,CAAZ;AACA;AACD;AACF,GAjBkC,EAiBhC,CAACN,IAAD,EAAOI,SAAP,EAAkBD,QAAlB,CAjBgC,CAAnC;AAmBA,SACEX,4BAAA,CAACD,gBAAgB,CAACkB,QAAlB;AAA2BC,IAAAA,KAAK,EAAE;AAAEhB,MAAAA,SAAS,EAAEM,IAAb;AAAmBQ,MAAAA,eAAe,EAAfA;AAAnB;GAAlC,EACEhB,4BAAA,CAACmB,UAAD;AAAYjB,IAAAA,SAAS,EAAEM;GAAvB,CADF,EAEGH,QAFH,CADF;AAMD;;;;"}