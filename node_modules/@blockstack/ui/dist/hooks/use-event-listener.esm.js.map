{"version":3,"file":"use-event-listener.esm.js","sources":["../../src/hooks/use-event-listener.ts"],"sourcesContent":["import * as React from 'react';\nimport { isBrowser, FunctionArguments } from '../utils';\nimport { useLatestRef } from './use-latest-ref';\n\ntype AddEventListener = FunctionArguments<typeof document.addEventListener>;\n\n/**\n * React hook to manage browser event listeners\n *\n * @param event the event name\n * @param handler the event handler function to execute\n * @param doc the dom environment to execute against (defaults to `document`)\n * @param options the event listener options\n */\nexport function useEventListener(\n  event: keyof WindowEventMap,\n  handler: (event: any) => void,\n  doc: Document | null = isBrowser ? document : null,\n  options?: AddEventListener[2]\n) {\n  const savedHandler = useLatestRef(handler);\n\n  React.useEffect(() => {\n    if (!doc) return;\n\n    const listener = (event: any) => {\n      savedHandler.current(event);\n    };\n\n    doc.addEventListener(event, listener, options);\n\n    return () => {\n      doc.removeEventListener(event, listener, options);\n    };\n  }, [event, doc, options, savedHandler]);\n\n  return () => {\n    doc?.removeEventListener(event, savedHandler.current, options);\n  };\n}\n"],"names":["useEventListener","event","handler","doc","options","isBrowser","document","savedHandler","useLatestRef","React","listener","current","addEventListener","removeEventListener"],"mappings":";;;;SAcgBA,iBACdC,OACAC,SACAC,KACAC;MADAD;AAAAA,IAAAA,MAAuBE,SAAS,GAAGC,QAAH,GAAc;;;AAG9C,MAAMC,YAAY,GAAGC,YAAY,CAACN,OAAD,CAAjC;AAEAO,EAAAA,SAAA,CAAgB;AACd,QAAI,CAACN,GAAL,EAAU;;AAEV,QAAMO,QAAQ,GAAG,SAAXA,QAAW,CAACT,KAAD;AACfM,MAAAA,YAAY,CAACI,OAAb,CAAqBV,KAArB;AACD,KAFD;;AAIAE,IAAAA,GAAG,CAACS,gBAAJ,CAAqBX,KAArB,EAA4BS,QAA5B,EAAsCN,OAAtC;AAEA,WAAO;AACLD,MAAAA,GAAG,CAACU,mBAAJ,CAAwBZ,KAAxB,EAA+BS,QAA/B,EAAyCN,OAAzC;AACD,KAFD;AAGD,GAZD,EAYG,CAACH,KAAD,EAAQE,GAAR,EAAaC,OAAb,EAAsBG,YAAtB,CAZH;AAcA,SAAO;;;AACL,YAAAJ,GAAG,UAAH,oCAAKU,mBAAL,CAAyBZ,KAAzB,EAAgCM,YAAY,CAACI,OAA7C,EAAsDP,OAAtD;AACD,GAFD;AAGD;;;;"}